<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Door Open/Close Demo</title>
<style>
  :root{
    --wall:#f1f5f9;
    --floor:#e2e8f0;
    --frame:#0f172a;
    --door:#8b5e3c;
    --door-edge:#734a2e;
    --handle:#d1d5db;
    --shadow:#00000033;
    --accent:#2563eb;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
    background:linear-gradient(180deg,var(--wall),var(--floor) 60%);
    color:#0b1220;
    min-height:100svh;
    display:grid;
    place-items:center;
    padding:24px;
  }

  .wrap{
    width:min(900px,92vw);
    display:grid;
    gap:18px;
    justify-items:center;
  }

  h1{margin:0 0 6px;font-size:clamp(18px,3vw,24px)}
  .controls{
    display:flex;flex-wrap:wrap;gap:10px;justify-content:center;align-items:center
  }
  button{
    border:0;
    padding:12px 16px;
    border-radius:999px;
    background:var(--accent);
    color:white;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 6px 20px var(--shadow);
    transition:transform .08s ease, opacity .2s ease, filter .2s ease;
  }
  button.secondary{background:#0f172a}
  button:active{transform:translateY(1px) scale(.98)}
  button:disabled{opacity:.55;cursor:not-allowed;filter:grayscale(.2)}

  .scene{
    width:min(720px,95vw);
    height:min(420px,62vh);
    background:
      radial-gradient(120px 40px at 60% 100%, #0000 70%, #0001),
      linear-gradient(180deg,#ffffffaa,#ffffff00 45%),
      var(--wall);
    border-radius:18px;
    position:relative;
    box-shadow:
      inset 0 -80px 140px #0000001b,
      0 12px 30px #0000002a;
    display:grid;
    place-items:center;
    overflow:hidden;
  }

  /* Door frame and floor line */
  .frame{
    width:58%;
    height:78%;
    border:10px solid var(--frame);
    border-bottom-width:14px;
    background:linear-gradient(180deg,#0b122014,#0b122005);
    border-radius:10px;
    position:relative;
    perspective:1100px; /* gives the 3D effect */
    box-shadow:0 16px 40px var(--shadow);
  }

  /* The door panel (left-hinged) */
  .door{
    position:absolute; inset:0;
    transform-origin:left center;
    background:
      linear-gradient(90deg,var(--door-edge) 0 10px, #0000 0),
      repeating-linear-gradient(90deg,#0000 0 120px,#0000000a 120px 121px),
      linear-gradient(180deg,#a47149,#774c2e 120%);
    border-radius:4px;
    box-shadow: inset -8px 0 12px #0000002c, inset 0 0 0 1px #00000033;
    transition:transform .9s cubic-bezier(.2,.8,.2,1);
  }

  /* A little floor shadow that grows when open */
  .swing-shadow{
    position:absolute; left:0; right:0; bottom:-18px; height:60px;
    background:radial-gradient(200px 40px at 20% 0, #00000033, #0000 70%);
    filter:blur(3px);
    opacity:.35;
    transform-origin:left;
    transition:transform .9s cubic-bezier(.2,.8,.2,1), opacity .6s;
    pointer-events:none;
  }

  /* Door handle */
  .handle{
    position:absolute;
    width:28px; height:28px; border-radius:50%;
    right:28px; top:50%; transform:translateY(-50%);
    background:radial-gradient(circle at 35% 35%, #ffffff, #bfc5cf 45%, #8a919b 65%, #4b5563 100%);
    box-shadow: 0 2px 4px #0003, inset 0 1px 1px #fff8;
  }

  /* State: open */
  .open .door{ transform: rotateY(-102deg); }
  .open .swing-shadow{ transform: scaleX(1.8); opacity:.55; }

  /* Status pill */
  .status{
    padding:8px 12px;
    border-radius:999px;
    font-weight:700;
    letter-spacing:.3px;
    background:#0b122a0f;
    border:1px solid #0b122a1a;
  }
  .status .dot{
    display:inline-block;width:10px;height:10px;border-radius:50%;
    margin-right:8px;vertical-align:middle;background:#16a34a;
    box-shadow:0 0 0 4px #16a34a22;
  }
  .status.closed .dot{ background:#ef4444; box-shadow:0 0 0 4px #ef444422; }

  /* Helper text */
  .hint{opacity:.7;font-size:.92rem}

  @media (max-width:640px){
    .frame{width:72%;height:72%}
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>Door Opening & Closing Demo</h1>

    <div class="controls" role="group" aria-label="Door controls">
      <button id="openBtn" aria-controls="door" aria-label="Open door">Open</button>
      <button id="closeBtn" class="secondary" aria-controls="door" aria-label="Close door">Close</button>
      <button id="toggleBtn" aria-controls="door" aria-pressed="false">Toggle</button>
      <button id="autoBtn" class="secondary" aria-pressed="false" title="Open & close every 2 seconds">Auto</button>
      <span id="status" class="status closed" aria-live="polite">
        <span class="dot"></span> Closed
      </span>
    </div>

    <div class="scene">
      <div id="doorFrame" class="frame" aria-label="Doorway">
        <div id="door" class="door" role="img" aria-label="Wooden door">
          <div class="handle" aria-hidden="true"></div>
        </div>
        <div class="swing-shadow" aria-hidden="true"></div>
      </div>
    </div>

    <div class="hint">Tip: press <kbd>O</kbd> to open, <kbd>C</kbd> to close, or <kbd>Space</kbd> to toggle.</div>
  </div>

<script>
  const frame   = document.getElementById('doorFrame');
  const door    = document.getElementById('door');
  const status  = document.getElementById('status');

  const openBtn   = document.getElementById('openBtn');
  const closeBtn  = document.getElementById('closeBtn');
  const toggleBtn = document.getElementById('toggleBtn');
  const autoBtn   = document.getElementById('autoBtn');

  let autoTimer = null;

  function setOpen(isOpen){
    frame.classList.toggle('open', isOpen);
    status.classList.toggle('closed', !isOpen);
    status.textContent = (isOpen ? 'Opened' : 'Closed');
    // Re-add the colored dot after swapping textContent
    const dot = document.createElement('span');
    dot.className = 'dot';
    status.prepend(dot);

    // For accessibility
    toggleBtn.setAttribute('aria-pressed', String(isOpen));
  }

  function toggle(){
    setOpen(!frame.classList.contains('open'));
  }

  openBtn.addEventListener('click', () => setOpen(true));
  closeBtn.addEventListener('click', () => setOpen(false));
  toggleBtn.addEventListener('click', toggle);

  autoBtn.addEventListener('click', () => {
    const running = autoTimer !== null;
    if(running){
      clearInterval(autoTimer);
      autoTimer = null;
      autoBtn.setAttribute('aria-pressed','false');
      autoBtn.textContent = 'Auto';
    }else{
      setOpen(true);
      autoTimer = setInterval(toggle, 2000);
      autoBtn.setAttribute('aria-pressed','true');
      autoBtn.textContent = 'Stop Auto';
    }
  });

  // Keyboard shortcuts: Space toggles, O opens, C closes
  window.addEventListener('keydown', (e) => {
    if (['INPUT','TEXTAREA','SELECT','BUTTON'].includes(e.target.tagName)) return;
    if (e.code === 'Space'){ e.preventDefault(); toggle(); }
    if (e.key.toLowerCase() === 'o') setOpen(true);
    if (e.key.toLowerCase() === 'c') setOpen(false);
  });

  // Start closed
  setOpen(false);
</script>
</body>
</html>
